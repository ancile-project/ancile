{% extends "default.html" %}

{% block title %}User Panel{% endblock %}

{% block content %}

<h1>Policy</h1>

<hr class="my-4">

{% include "policy_visualizer.html" %}
<div id="policyTextarea" style="background-color: #bbb; width: 50%; margin: auto; padding: 5px; word-wrap:break-word; font-family: monospace">
{{ policy.policy }}
</div>

<br>

<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Application</th>
      {% if predefined is sameas True %}
      <th scope="col">Group</th>
      {% endif %}
      <th scope="col">Purpose</th>
      <th scope="col">Provider</th>
      {% if predefined is sameas False %}
      <th scope="col">Read-only?</th>
      <th scope="col">Active?</th>
      {% endif %}
    </tr>
  </thead>
  <tbody>
    <tr class="table-default">
      <td>{{ policy.app.email }}</td>
      {% if predefined is sameas True %}
      {% if policy.group is none %}
      <td>None</td>
      {% else%}
      <td>{{ policy.group.name  }}</td>
      {% endif %}
      {% endif %}
      <td style="word-break:break-all;">{{ policy.purpose }}</td>
      <td>{{ policy.provider  }}</td>
      {% if predefined is sameas False %}
      <td>{{ policy.read_only  }}</td>
      <td>{{ policy.active  }}</td>
      {% endif %}
    </tr>
  </tbody>
</table>

{% if predefined is not sameas False %}
<a class="btn btn-primary btn-lg" href={{url_for("user_use_predefined_policy", id=policy.id)}} style="color:white;">Use policy</a>
<a class="btn btn-secondary btn-lg" href={{url_for("user_view_app", id=policy.app.id)}} style="color:white;">Back</a>
{% else %}
<a class="btn btn-secondary btn-lg" href="/user#policies" style="color:white;">Back</a>
{% endif %}

{% endblock %}
